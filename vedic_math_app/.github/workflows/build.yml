name: ğŸš€ WebToApp Builder

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read
  packages: read

jobs:
  build:
    runs-on: ubuntu-latest
    name: ğŸ“¦ Ø¨Ù†Ø§Ø¡ APK
    steps:
      - name: ğŸ“¥ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯
        uses: actions/checkout@v4

      - name: â˜• Ø¥Ø¹Ø¯Ø§Ø¯ Java
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: '17'
          cache: gradle

      - name: ğŸ¤– Ø¥Ø¹Ø¯Ø§Ø¯ Android SDK
        uses: android-actions/setup-android@v3
        with:
          packages: |
            platforms;android-34
            build-tools;34.0.0
          accept-android-sdk-licenses: true

      - name: ğŸ”§ Ù…Ù†Ø­ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ØªÙ†ÙÙŠØ° Ù„Ù€ Gradle
        run: chmod +x gradlew

      - name: ğŸ”¨ Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        run: ./gradlew assembleDebug --stacktrace

      - name: ğŸ“¤ Ø±ÙØ¹ Ù…Ù„Ù APK
        uses: actions/upload-artifact@v4
        with:
          name: webtoapp-builder.apk
          path: app/build/outputs/apk/debug/app-debug.apk
          retention-days: 7

      - name: â„¹ï¸ Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù„Ù
        run: |
          echo "=== ğŸ“± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù„Ù APK ==="
          ls -lh app/build/outputs/apk/debug/app-debug.apk
          echo ""
          echo "âœ… ØªÙ… Ø¨Ù†Ø§Ø¡ APK Ø¨Ù†Ø¬Ø§Ø­!"
          echo "ğŸ“¥ Ø­Ù…Ù„ Ø§Ù„Ù…Ù„Ù Ù…Ù† Ù‚Ø³Ù… Artifacts ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„"
